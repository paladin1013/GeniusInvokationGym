"""Base class of summons generated by character skills: abstract class
A character in the game should be an instant of the specific character class defined in each file"""
import itertools
from abc import ABC, abstractmethod
from queue import PriorityQueue
from typing import OrderedDict

from pydantic import BaseModel, root_validator

from gisim.classes.enums import PlayerID
from gisim.classes.message import Message

from .entity import Entity


class Summon(BaseModel, Entity, ABC):

    name: str
    usages: int
    player_id: PlayerID
    position: int
    """Range from 0~3, should be set when adding a new summon to the summon zone"""
    active: bool = True

    def encode(self):
        info = OrderedDict()
        info["position"] = self.position
        info["name"] = self.name
        info["usages"] = self.usages
        info["position"] = self.position
        info["active"] = self.active

    @abstractmethod
    def msg_handler(self, msg_queue: PriorityQueue["Message"]) -> bool:
        ...
